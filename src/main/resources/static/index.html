<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Important website</title>

    <style>
        body {
            background-color: #575757;
            color: #eeeeee;
            text-align: center;
            font-size: 20px;
        }
    </style>
</head>
<body onload="init()">
    <h2>Ours Products</h2>
    <div id="productList">

    </div>

    <script>
        const url = "http://localhost:8080";
        //const url = "https://demo-rest-po.herokuapp.com";

        function init() {
            let request = new XMLHttpRequest();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    console.log(request.responseText);
                    let response = JSON.parse(request.responseText);
                    createProductList(response);
                } else if(request.readyState === 4) {
                    document.getElementById('productList').innerText = "Błąd: req statust:" + request.status;
                }
            }
            request.open("GET", url + "/api/products?allDetails=false");
            request.send(null);
        }

        function createProductList(productList) {
            let container = document.getElementById('productList');
            container.innerHTML= "";
            for (let i =0 ; i < productList.length; i++) {
                container.innerHTML += "<a href='" + url + "/productDetails?id=" + productList[i].id +"'><button>Details</button></a> " + productList[i].name +"<br>";
            }
        }
    </script>
</body>
</html>
